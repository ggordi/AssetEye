{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gmg51\\\\Desktop\\\\AssetEye\\\\frontend\\\\src\\\\pages\\\\DashboardPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext } from \"react\";\nimport AuthContext from \"../context/AuthContext\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Header from \"../components/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardPage = () => {\n  _s();\n  let {\n    user,\n    authTokens\n  } = useContext(AuthContext);\n  let [stocks, setStocks] = useState([]);\n  let [stockInfo, setStockInfo] = useState([]);\n  const getWatchlist = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/api/watchlist-retrieve/', {\n        headers: {\n          Authorization: `Bearer ${authTokens.access}`\n        }\n      });\n      console.log(\"watchlist retrieved: \", response.data);\n      setStocks(response.data.map(stock => stock['ticker']));\n    } catch (error) {\n      console.error(\"error fetching data\");\n    }\n  };\n  const handleDelete = async ticker => {\n    try {\n      const response = await axios.post('http://localhost:8000/api/watchlist-remove/', {\n        ticker\n      }, {\n        headers: {\n          Authorization: `Bearer ${authTokens.access}`\n        }\n      });\n      setStocks(oldStocks => oldStocks.filter(tick => tick !== ticker));\n    } catch (error) {\n      console.error(\"failed to delete stock\");\n    }\n  };\n  useEffect(() => {\n    //when stocks is populated, need to retrieve info for each stock\n    const fetchInfo = async () => {\n      try {\n        const reqs = stocks.map(stock => axios.get('http://localhost:8000/api/stock-info/', {\n          params: {\n            input: stock\n          }\n        }));\n        const responses = await Promise.all(reqs);\n        setStockInfo(responses.map(res => res.data.info));\n        console.log(\"stock info retrieved\");\n      } catch (error) {\n        console.error(\"failed to fetch stock info \");\n      }\n    };\n    fetchInfo();\n  }, [stocks]);\n  useEffect(() => {\n    getWatchlist();\n  }, [authTokens]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-cover bg-center flex items-start justify-center\",\n    style: {\n      backgroundImage: \"url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=3872&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-2/3 mt-48\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-5xl font-bold text-white mb-8\",\n        children: [user.username.charAt(0).toUpperCase() + user.username.slice(1), \"'s Assets\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: stockInfo.map((stock, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded-md mx-auto my-6 text-xl w-3/4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: [stock['ticker'], /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold ml-16\",\n              children: [\"$\", stock['current-price']]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-md font-bold ml-8 ${stock[\"percent-change\"] >= 0 ? \"text-green-700\" : \"text-red-700\"}`,\n            children: [\"(\", stock[\"percent-change\"].toFixed(2), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-16\",\n            children: [\"Open: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"$\", stock['open-price']]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-16\",\n            children: [\"Close: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"$\", stock['close-price']]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 46\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(stock['ticker']),\n            className: \"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors duration-300 ml-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-6 w-6\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M6 18L18 6M6 6l12 12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPage, \"g0wcOpTKA0mLnMNAYy34HLqJWjM=\");\n_c = DashboardPage;\nexport default DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["React","useContext","AuthContext","useState","useEffect","axios","Header","jsxDEV","_jsxDEV","DashboardPage","_s","user","authTokens","stocks","setStocks","stockInfo","setStockInfo","getWatchlist","response","get","headers","Authorization","access","console","log","data","map","stock","error","handleDelete","ticker","post","oldStocks","filter","tick","fetchInfo","reqs","params","input","responses","Promise","all","res","info","className","style","backgroundImage","children","fileName","_jsxFileName","lineNumber","columnNumber","username","charAt","toUpperCase","slice","index","toFixed","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","_c","$RefreshReg$"],"sources":["C:/Users/gmg51/Desktop/AssetEye/frontend/src/pages/DashboardPage.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport AuthContext from \"../context/AuthContext\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Header from \"../components/Header\";\r\n\r\nconst DashboardPage = () => {\r\n  let { user, authTokens } = useContext(AuthContext);\r\n  let [stocks, setStocks] = useState([]);\r\n  let [stockInfo, setStockInfo] = useState([]);\r\n\r\n  const getWatchlist = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:8000/api/watchlist-retrieve/', {\r\n        headers : {\r\n            Authorization: `Bearer ${authTokens.access}`\r\n        }\r\n      })\r\n      console.log(\"watchlist retrieved: \", response.data)\r\n      setStocks(response.data.map(stock => stock['ticker']))\r\n    } catch (error) {\r\n      console.error(\"error fetching data\");\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (ticker) => {\r\n    try {\r\n      const response = await axios.post('http://localhost:8000/api/watchlist-remove/', {ticker}, {\r\n        headers : {\r\n          Authorization: `Bearer ${authTokens.access}`\r\n        } \r\n      })\r\n      setStocks(oldStocks => oldStocks.filter(tick => tick !== ticker))\r\n    } catch (error) {\r\n      console.error(\"failed to delete stock\")\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n     //when stocks is populated, need to retrieve info for each stock\r\n     const fetchInfo = async() => {\r\n      try {\r\n        const reqs = stocks.map(stock => \r\n        axios.get('http://localhost:8000/api/stock-info/', {\r\n          params: { input: stock }\r\n        })) \r\n        const responses = await Promise.all(reqs)\r\n        setStockInfo(responses.map(res => res.data.info))\r\n        console.log(\"stock info retrieved\")\r\n       } catch (error) {\r\n        console.error(\"failed to fetch stock info \")\r\n       }\r\n     }\r\n\r\n     fetchInfo()\r\n    \r\n  }, [stocks])\r\n\r\n  useEffect(() => {\r\n    getWatchlist()\r\n  }, [authTokens])\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen bg-cover bg-center flex items-start justify-center\"\r\n      style={{\r\n        backgroundImage:\r\n          \"url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=3872&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')\",\r\n      }}\r\n    >\r\n      <Header />\r\n\r\n      \r\n      <div className=\"w-2/3 mt-48\">\r\n        <h1 className=\"text-5xl font-bold text-white mb-8\">{user.username.charAt(0).toUpperCase() + user.username.slice(1) }'s Assets</h1>\r\n\r\n        <div className=''>\r\n          {stockInfo.map((stock, index) => (\r\n            <div key={index} className=\"bg-white p-4 rounded-md mx-auto my-6 text-xl w-3/4\" >\r\n              <span className=\"font-bold\">{stock['ticker']}\r\n              <span className=\"font-bold ml-16\">${stock['current-price']}</span>\r\n              </span>\r\n              <span className={`text-md font-bold ml-8 ${\r\n                stock[\"percent-change\"] >= 0\r\n                  ? \"text-green-700\"\r\n                  : \"text-red-700\"\r\n              }`}>({stock[\"percent-change\"].toFixed(2)}%)</span>\r\n              <span className=\"ml-16\">Open: <b>${stock['open-price']}</b></span>\r\n              <span className=\"ml-16\">Close: <b>${stock['close-price']}</b></span>\r\n              <button onClick={() => handleDelete(stock['ticker'])} className=\"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors duration-300 ml-4\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n\r\n       \r\n\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}